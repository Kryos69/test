

local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

function createInstance(className, properties)
	local instance = Instance.new(className)
	for k, v in pairs(properties) do
		if typeof(k) ~= 'string' then
			continue
		end
		instance[k] = v
	end
	return instance
end

local function makeDraggable(frame, dragHandle)
	local dragging = false
	local dragInput, mousePos, framePos

	dragHandle = dragHandle or frame

	dragHandle.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			mousePos = input.Position
			framePos = frame.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	dragHandle.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement then
			dragInput = input
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			local delta = input.Position - mousePos
			frame.Position = UDim2.new(
				framePos.X.Scale,
				framePos.X.Offset + delta.X,
				framePos.Y.Scale,
				framePos.Y.Offset + delta.Y
			)
		end
	end)
end

local function createTween(object, goal, duration)
	duration = duration or 0.3
	local tweenInfo = TweenInfo.new(duration, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
	local tween = TweenService:Create(object, tweenInfo, goal)
	return tween
end

-- // Main Library

local Library = {}
Library.Tabs = {}
Library.CurrentTab = nil
Library.NotificationPosition = "BottomRight" -- Default notification position
Library.HideInfo = false
Library.ToggleKey = Enum.KeyCode.RightShift

local Neptune = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
Neptune.Name = "Neptune"
Neptune.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
Neptune.ResetOnSpawn = false
Neptune.IgnoreGuiInset = true

local Holder = createInstance("Frame", {
	Name = "Holder",
	Position = UDim2.new(0.5, 0, 0.5, 0),
	Size = UDim2.new(0, 822, 0, 599),
	Parent = Neptune,
	BackgroundTransparency = 1,
	AnchorPoint = Vector2.new(0.5, 0.5),
	BorderSizePixel = 0,
	ZIndex = 1
})

local UIScale = createInstance("UIScale", {
	Parent = Holder,
	Scale = 1
})

local function updateScale()
	local viewportSize = workspace.CurrentCamera.ViewportSize
	local baseWidth = 1920
	local baseHeight = 1080
	local scaleX = viewportSize.X / baseWidth
	local scaleY = viewportSize.Y / baseHeight
	local scale = math.min(scaleX, scaleY, 1)
	UIScale.Scale = math.max(scale, 0.5) -- Minimum scale of 0.5
end

updateScale()
workspace.CurrentCamera:GetPropertyChangedSignal("ViewportSize"):Connect(updateScale)

local Background = createInstance("ImageLabel", {
	Name = "Background",
	Position = UDim2.new(0.549, 0, 0.438, 0),
	Size = UDim2.new(0, 926, 0, 656),
	Parent = Holder,
	BackgroundTransparency = 1,
	AnchorPoint = Vector2.new(0.5, 0.5),
	BackgroundColor3 = Color3.fromRGB(255, 255, 255),
	ImageColor3 = Color3.fromRGB(255, 255, 255),
	Image = "rbxassetid://89808568475809",
	BorderSizePixel = 0,
	ZIndex = 1
})

makeDraggable(Holder, Background)

local Logo = createInstance("ImageLabel", {
	Name = "Logo",
	Position = UDim2.new(0, 0, 0.008, 0),
	Size = UDim2.new(0, 57, 0, 58),
	Parent = Background,
	BackgroundTransparency = 1,
	Image = "rbxassetid://71700758864501",
	BorderSizePixel = 0,
	ZIndex = 1
})

local TabHolder = createInstance("Frame", {
	Name = "TabHolder",
	Position = UDim2.new(0, 0, 0.097, 0),
	Size = UDim2.new(0, 197, 0, 464),
	Parent = Background,
	BackgroundTransparency = 1,
	BorderSizePixel = 0,
	ZIndex = 1
})

local UIListLayout = createInstance("UIListLayout", {
	Parent = TabHolder,
	Padding = UDim.new(0, 15),
	FillDirection = Enum.FillDirection.Vertical,
	HorizontalAlignment = Enum.HorizontalAlignment.Left,
	VerticalAlignment = Enum.VerticalAlignment.Top,
	SortOrder = Enum.SortOrder.LayoutOrder
})

createInstance("UIPadding", {
	Parent = TabHolder,
	PaddingTop = UDim.new(0, 15),
	PaddingLeft = UDim.new(0, 25)
})

local TabContent = createInstance("Frame", {
	Name = "TabContent",
	Position = UDim2.new(0.209, 0, 0.096, 0),
	Size = UDim2.new(0, 732, 0, 592),
	Parent = Background,
	BackgroundTransparency = 1,
	BorderSizePixel = 0,
	ZIndex = 1
})

local Scroll = createInstance("ScrollingFrame", {
	Name = "Scroll",
	Position = UDim2.new(0, 0, 0, 0),
	Size = UDim2.new(0, 732, 0, 592),
	Parent = TabContent,
	BackgroundTransparency = 1,
	ScrollBarThickness = 5,
	ScrollBarImageColor3 = Color3.fromRGB(69, 94, 255),
	CanvasSize = UDim2.new(0, 0, 0, 0),
	BorderSizePixel = 0,
	ZIndex = 1
})

createInstance("UIPadding", {
	Parent = Scroll,
	PaddingLeft = UDim.new(0, 15),
	PaddingTop = UDim.new(0, 15),
	PaddingRight = UDim.new(0, 15)
})

local ScrollLayout = createInstance("UIListLayout", {
	Parent = Scroll,
	Padding = UDim.new(0, 15),
	FillDirection = Enum.FillDirection.Vertical,
	HorizontalAlignment = Enum.HorizontalAlignment.Left,
	VerticalAlignment = Enum.VerticalAlignment.Top,
	SortOrder = Enum.SortOrder.LayoutOrder
})

ScrollLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	Scroll.CanvasSize = UDim2.new(0, 0, 0, ScrollLayout.AbsoluteContentSize.Y + 30)
end)

local PlayerHolder = createInstance("ImageLabel", {
	Name = "PlayerHolder",
	Position = UDim2.new(0, 0, 0.880, 0),
	Size = UDim2.new(0, 175, 0, 78),
	Parent = Background,
	BackgroundTransparency = 1,
	Image = "rbxassetid://106984070957277",
	BorderSizePixel = 0,
	ZIndex = 4
})

local PlayerIcon = createInstance("ImageLabel", {
	Name = "Player",
	Position = UDim2.new(0.143, 0, 0.265, 0),
	Size = UDim2.new(0, 35, 0, 35),
	Parent = PlayerHolder,
	BackgroundTransparency = 1,
	Image = "rbxasset://textures/ui/GuiImagePlaceholder.png",
	BorderSizePixel = 0,
	ZIndex = 4
})

local userId = LocalPlayer.UserId
local thumbType = Enum.ThumbnailType.HeadShot
local thumbSize = Enum.ThumbnailSize.Size48x48

local function updatePlayerInfo()
	if Library.HideInfo then
		PlayerIcon.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"
		if not PlayerIcon:FindFirstChild("Blur") then
			local blur = Instance.new("ImageLabel")
			blur.Name = "Blur"
			blur.Size = UDim2.new(1, 0, 1, 0)
			blur.BackgroundTransparency = 1
			blur.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"
			blur.ImageTransparency = 0.3
			blur.ZIndex = 5
			blur.Parent = PlayerIcon
			
			local blurCorner = Instance.new("UICorner")
			blurCorner.CornerRadius = UDim.new(1, 0)
			blurCorner.Parent = blur
		end
	else
		pcall(function()
			local content = Players:GetUserThumbnailAsync(userId, thumbType, thumbSize)
			PlayerIcon.Image = content
		end)
		if PlayerIcon:FindFirstChild("Blur") then
			PlayerIcon.Blur:Destroy()
		end
	end
end

updatePlayerInfo()

createInstance("UICorner", {
	Parent = PlayerIcon,
	CornerRadius = UDim.new(1, 0)
})

local UsernameLabel = createInstance("TextLabel", {
	Name = "Username",
	Position = UDim2.new(0.343, 0, 0.167, 0),
	Size = UDim2.new(0, 111, 0, 36),
	Parent = PlayerHolder,
	BackgroundTransparency = 1,
	Font = Enum.Font.GothamMedium,
	Text = Library.HideInfo and "*****" or LocalPlayer.Name,
	TextSize = 14,
	TextXAlignment = Enum.TextXAlignment.Center,
	TextColor3 = Color3.fromRGB(255, 255, 255),
	BorderSizePixel = 0,
	ZIndex = 4
})

function Library:SetHideInfo(value)
	self.HideInfo = value
	UsernameLabel.Text = value and "*****" or LocalPlayer.Name
	updatePlayerInfo()
end

-- // API Hook for expiration (commented out)
-- local function getExpirationFromAPI()
--     local success, result = pcall(function()
--         return game:HttpGet("YOUR_API_URL_HERE")
--     end)
--     if success then
--         return result -- Expected format: "5M 5D 15H 15S"
--     end
--     return "5M 5D 15H 15S"
-- end

local expirationTime = "5M 5D 15H 15S" -- getExpirationFromAPI()

createInstance("TextLabel", {
	Name = "Expire",
	Position = UDim2.new(0.343, 0, 0.526, 0),
	Size = UDim2.new(0, 111, 0, 14),
	Parent = PlayerHolder,
	BackgroundTransparency = 1,
	Font = Enum.Font.Gotham,
	Text = 'Expires: ' .. expirationTime,
	TextSize = 10,
	TextXAlignment = Enum.TextXAlignment.Center,
	TextColor3 = Color3.fromRGB(94, 94, 94),
	BorderSizePixel = 0,
	ZIndex = 4
})

local CloseButton = createInstance("ImageButton", {
	Position = UDim2.new(0.945, 0, 0.025, 0),
	Size = UDim2.new(0, 35, 0, 35),
	Parent = Background,
	BackgroundTransparency = 1,
	Image = "rbxassetid://90578957355678",
	ImageColor3 = Color3.fromRGB(255, 255, 255),
	BorderSizePixel = 0,
	ZIndex = 10
})

CloseButton.MouseButton1Click:Connect(function()
	Neptune:Destroy()
end)

-- UI Toggle Keybind
UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if not gameProcessed and input.KeyCode == Library.ToggleKey then
		Holder.Visible = not Holder.Visible
	end
end)

-- Function to set toggle key
function Library:SetToggleKey(keyCode)
	self.ToggleKey = keyCode
end

local ColorPickerFrame = createInstance("Frame", {
	Name = "BackgroundColorP",
	Position = UDim2.new(1.073, 0, 0.038, 0),
	Size = UDim2.new(0, 290, 0, 299),
	Parent = Background,
	BackgroundColor3 = Color3.fromRGB(25, 25, 28),
	BorderSizePixel = 0,
	Visible = false,
	ZIndex = 100
})

createInstance("UICorner", {
	Parent = ColorPickerFrame,
	CornerRadius = UDim.new(0, 5)
})

makeDraggable(ColorPickerFrame)

local Colorview = createInstance("Frame", {
	Name = "Colorview",
	Position = UDim2.new(0.077, 0, 0.082, 0),
	Size = UDim2.new(0, 245, 0, 201),
	Parent = ColorPickerFrame,
	BackgroundColor3 = Color3.fromRGB(255, 0, 0),
	BorderSizePixel = 0,
	ZIndex = 101
})

createInstance("UICorner", {
	Parent = Colorview,
	CornerRadius = UDim.new(0, 5)
})

local ColorviewWhite = createInstance("Frame", {
	Size = UDim2.new(1, 0, 1, 0),
	Parent = Colorview,
	BackgroundColor3 = Color3.fromRGB(255, 255, 255),
	BackgroundTransparency = 0,
	BorderSizePixel = 0,
	ZIndex = 102
})

createInstance("UICorner", {
	Parent = ColorviewWhite,
	CornerRadius = UDim.new(0, 5)
})

local ColorviewWhiteGradient = createInstance("UIGradient", {
	Parent = ColorviewWhite,
	Color = ColorSequence.new(Color3.fromRGB(255, 255, 255), Color3.fromRGB(255, 255, 255)),
	Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(1, 1)
	})
})

local ColorviewBlack = createInstance("Frame", {
	Size = UDim2.new(1, 0, 1, 0),
	Parent = Colorview,
	BackgroundColor3 = Color3.fromRGB(0, 0, 0),
	BackgroundTransparency = 1,
	BorderSizePixel = 0,
	ZIndex = 103
})

createInstance("UICorner", {
	Parent = ColorviewBlack,
	CornerRadius = UDim.new(0, 5)
})

local ColorviewBlackGradient = createInstance("UIGradient", {
	Parent = ColorviewBlack,
	Color = ColorSequence.new(Color3.fromRGB(0, 0, 0), Color3.fromRGB(0, 0, 0)),
	Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 1),
		NumberSequenceKeypoint.new(1, 0)
	}),
	Rotation = 90
})

local ColorSelector = createInstance("TextButton", {
	Name = "ColorSelector",
	Position = UDim2.new(0.5, 0, 0.5, 0),
	Size = UDim2.new(0, 18, 0, 18),
	AnchorPoint = Vector2.new(0.5, 0.5),
	Parent = Colorview,
	BackgroundColor3 = Color3.fromRGB(255, 255, 255),
	BorderSizePixel = 2,
	BorderColor3 = Color3.fromRGB(0, 0, 0),
	Text = "",
	ZIndex = 104
})

createInstance("UICorner", {
	Parent = ColorSelector,
	CornerRadius = UDim.new(1, 0)
})

local HueBar = createInstance("Frame", {
	Name = "Bar1",
	Position = UDim2.new(0.128, 0, 0.810, 0),
	Size = UDim2.new(0, 212, 0, 14),
	Parent = ColorPickerFrame,
	BackgroundColor3 = Color3.fromRGB(255, 255, 255),
	BorderSizePixel = 0,
	ZIndex = 101
})

createInstance("UICorner", {
	Parent = HueBar,
	CornerRadius = UDim.new(0, 5)
})

local HueGradient = createInstance("UIGradient", {
	Parent = HueBar,
	Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 0, 0)),
		ColorSequenceKeypoint.new(0.17, Color3.fromRGB(255, 255, 0)),
		ColorSequenceKeypoint.new(0.33, Color3.fromRGB(0, 255, 0)),
		ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0, 255, 255)),
		ColorSequenceKeypoint.new(0.67, Color3.fromRGB(0, 0, 255)),
		ColorSequenceKeypoint.new(0.83, Color3.fromRGB(255, 0, 255)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 0, 0))
	})
})

local HueDragger = createInstance("TextButton", {
	Name = "HueDragger",
	Position = UDim2.new(0, 0, 0.5, 0),
	Size = UDim2.new(0, 10, 0, 25),
	AnchorPoint = Vector2.new(0.5, 0.5),
	Parent = HueBar,
	BackgroundColor3 = Color3.fromRGB(255, 255, 255),
	Text = '',
	BorderSizePixel = 0,
	ZIndex = 102
})

createInstance("UICorner", {
	Parent = HueDragger,
	CornerRadius = UDim.new(0, 5)
})

local DarknessBar = createInstance("Frame", {
	Name = "Bar2",
	Position = UDim2.new(0.128, 0, 0.907, 0),
	Size = UDim2.new(0, 212, 0, 14),
	Parent = ColorPickerFrame,
	BackgroundColor3 = Color3.fromRGB(255, 255, 255),
	BorderSizePixel = 0,
	ZIndex = 101
})

createInstance("UICorner", {
	Parent = DarknessBar,
	CornerRadius = UDim.new(0, 5)
})

local DarknessGradient = createInstance("UIGradient", {
	Parent = DarknessBar,
	Color = ColorSequence.new(Color3.fromRGB(255, 255, 255), Color3.fromRGB(0, 0, 0))
})

local DarknessDragger = createInstance("TextButton", {
	Name = "DarknessDragger",
	Position = UDim2.new(1, 0, 0.5, 0),
	Size = UDim2.new(0, 10, 0, 25),
	AnchorPoint = Vector2.new(0.5, 0.5),
	Parent = DarknessBar,
	BackgroundColor3 = Color3.fromRGB(255, 255, 255),
	Text = '',
	BorderSizePixel = 0,
	ZIndex = 102
})

createInstance("UICorner", {
	Parent = DarknessDragger,
	CornerRadius = UDim.new(0, 5)
})

local currentHue = 0
local currentSat = 1
local currentVal = 1
local currentDarkness = 0
local currentCallback = nil

local function updateColorFromHSV()
	local hue = currentHue
	local sat = currentSat
	local val = currentVal
	
	local c = val * sat
	local x = c * (1 - math.abs((hue / 60) % 2 - 1))
	local m = val - c
	
	local r, g, b
	if hue < 60 then
		r, g, b = c, x, 0
	elseif hue < 120 then
		r, g, b = x, c, 0
	elseif hue < 180 then
		r, g, b = 0, c, x
	elseif hue < 240 then
		r, g, b = 0, x, c
	elseif hue < 300 then
		r, g, b = x, 0, c
	else
		r, g, b = c, 0, x
	end
	
	local darkFactor = 1 - currentDarkness
	local color = Color3.new((r + m) * darkFactor, (g + m) * darkFactor, (b + m) * darkFactor)
	
	if currentCallback then
		currentCallback(color)
	end
	
	local baseColor = Color3.new(r + m, g + m, b + m)
	DarknessGradient.Color = ColorSequence.new(baseColor, Color3.fromRGB(0, 0, 0))
	
	return color
end

local draggingColor = false
ColorSelector.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		draggingColor = true
	end
end)

local draggingHue = false
HueDragger.MouseButton1Down:Connect(function()
	draggingHue = true
end)

local draggingDarkness = false
DarknessDragger.MouseButton1Down:Connect(function()
	draggingDarkness = true
end)

UserInputService.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		draggingColor = false
		draggingHue = false
		draggingDarkness = false
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		if draggingColor then
			local mousePos = UserInputService:GetMouseLocation()
			local relativeX = math.clamp((mousePos.X - Colorview.AbsolutePosition.X) / Colorview.AbsoluteSize.X, 0, 1)
			local relativeY = math.clamp((mousePos.Y - Colorview.AbsolutePosition.Y) / Colorview.AbsoluteSize.Y, 0, 1)
			
			currentSat = relativeX
			currentVal = 1 - relativeY
			
			ColorSelector.Position = UDim2.new(relativeX, 0, relativeY, 0)
			updateColorFromHSV()
		end
		
		if draggingHue then
			local mousePos = UserInputService:GetMouseLocation()
			local relativePos = math.clamp((mousePos.X - HueBar.AbsolutePosition.X) / HueBar.AbsoluteSize.X, 0, 1)
			
			currentHue = relativePos * 360
			HueDragger.Position = UDim2.new(relativePos, 0, 0.5, 0)
			
			local hueColor = Color3.fromHSV(relativePos, 1, 1)
			Colorview.BackgroundColor3 = hueColor
			
			updateColorFromHSV()
		end
		
		if draggingDarkness then
			local mousePos = UserInputService:GetMouseLocation()
			local relativePos = math.clamp((mousePos.X - DarknessBar.AbsolutePosition.X) / DarknessBar.AbsoluteSize.X, 0, 1)
			
			currentDarkness = relativePos
			DarknessDragger.Position = UDim2.new(relativePos, 0, 0.5, 0)
			
			updateColorFromHSV()
		end
	end
end)

function Library:SetNotificationPosition(position)
	-- "TopLeft", "TopRight", "BottomLeft", "BottomRight"
	local validPositions = {
		TopLeft = true,
		TopRight = true,
		BottomLeft = true,
		BottomRight = true
	}
	
	if validPositions[position] then
		self.NotificationPosition = position
		return true
	else
		warn("Invalid notification position: " .. tostring(position) .. ". Use: TopLeft, TopRight, BottomLeft, or BottomRight")
		return false
	end
end

local activeNotifications = {}

function Library:Notify(options)
	local notifType = options.Type or "Notification" -- "Error", "Success", "Warning", "Notification"
	local title = options.Title or "Notification"
	local description = options.Description or ""
	local duration = options.Duration or 3
	local position = options.Position or self.NotificationPosition or "BottomRight"
	
	local icons = {
		Error = "rbxassetid://94165803738519",
		Success = "rbxassetid://123509293785756",
		Warning = "rbxassetid://136655865171247",
		Notification = ""
	}
	
	local colors = {
		Error = Color3.fromRGB(239, 68, 68),
		Success = Color3.fromRGB(34, 197, 94),
		Warning = Color3.fromRGB(255, 213, 79),
		Notification = Color3.fromRGB(69, 94, 255)
	}
	
	local positions = {
		TopLeft = {start = UDim2.new(-0.2, 0, 0, 0), target = UDim2.new(0.01, 0, 0.05, 0), direction = 1},
		TopRight = {start = UDim2.new(1.2, 0, 0, 0), target = UDim2.new(0.85, 0, 0.05, 0), direction = 1},
		BottomLeft = {start = UDim2.new(-0.2, 0, 1, 0), target = UDim2.new(0.01, 0, 0.88, 0), direction = -1},
		BottomRight = {start = UDim2.new(1.2, 0, 1, 0), target = UDim2.new(0.85, 0, 0.88, 0), direction = -1}
	}
	
	local pos = positions[position] or positions.BottomRight
	
	if not activeNotifications[position] then
		activeNotifications[position] = {}
	end
	
	local offset = 0
	for _, notif in ipairs(activeNotifications[position]) do
		if notif and notif.Parent then
			offset = offset + (110 * pos.direction)
		end
	end
	
	local notif = createInstance("Frame", {
		Name = "Notification",
		Position = pos.start,
		Size = UDim2.new(0, 280, 0, 100),
		Parent = Neptune,
		BackgroundColor3 = Color3.fromRGB(25, 25, 28),
		BorderSizePixel = 0,
		ZIndex = 200
	})
	
	table.insert(activeNotifications[position], notif)
	
	createInstance("UICorner", {
		Parent = notif,
		CornerRadius = UDim.new(0, 8)
	})
	
	createInstance("UIStroke", {
		Parent = notif,
		Color = Color3.fromRGB(45, 45, 48),
		Thickness = 1,
		Transparency = 0.5
	})
	
	local titleLabel = createInstance("TextLabel", {
		Name = "Title",
		Position = UDim2.new(0, 35, 0, 8),
		Size = UDim2.new(1, -45, 0, 24),
		Parent = notif,
		BackgroundTransparency = 1,
		Font = Enum.Font.GothamBold,
		Text = title,
		TextSize = 15,
		TextXAlignment = Enum.TextXAlignment.Left,
		TextYAlignment = Enum.TextYAlignment.Center,
		TextColor3 = Color3.fromRGB(255, 255, 255),
		BorderSizePixel = 0,
		ZIndex = 201
	})
	
	createInstance("Frame", {
		Name = "Line",
		Position = UDim2.new(0, 0, 0, 36),
		Size = UDim2.new(1, 0, 0, 1),
		Parent = notif,
		BackgroundColor3 = Color3.fromRGB(45, 45, 48),
		BorderSizePixel = 0,
		ZIndex = 201
	})
	
	createInstance("TextLabel", {
		Name = "Description",
		Position = UDim2.new(0, 10, 0, 40),
		Size = UDim2.new(1, -20, 0, 42),
		Parent = notif,
		BackgroundTransparency = 1,
		Font = Enum.Font.Gotham,
		Text = description,
		TextSize = 12,
		TextXAlignment = Enum.TextXAlignment.Left,
		TextYAlignment = Enum.TextYAlignment.Top,
		TextWrapped = true,
		TextColor3 = Color3.fromRGB(180, 180, 180),
		BorderSizePixel = 0,
		ZIndex = 201
	})
	
	if icons[notifType] and icons[notifType] ~= "" then
		createInstance("ImageLabel", {
			Name = "Icon",
			Position = UDim2.new(0, 10, 0, 10),
			Size = UDim2.new(0, 18, 0, 18),
			Parent = notif,
			BackgroundTransparency = 1,
			ImageColor3 = Color3.fromRGB(255, 255, 255),
			Image = icons[notifType],
			BorderSizePixel = 0,
			ZIndex = 202
		})
	end
	
	local bar = createInstance("Frame", {
		Name = "Bar",
		Position = UDim2.new(0, 10, 1, -15),
		Size = UDim2.new(1, -20, 0, 6),
		Parent = notif,
		BackgroundColor3 = colors[notifType],
		BorderSizePixel = 0,
		ZIndex = 201
	})
	
	createInstance("UICorner", {
		Parent = bar,
		CornerRadius = UDim.new(1, 0)
	})
	
	local targetPos = UDim2.new(
		pos.target.X.Scale,
		pos.target.X.Offset,
		pos.target.Y.Scale,
		pos.target.Y.Offset + offset
	)
	
	local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
	local slideIn = TweenService:Create(notif, tweenInfo, {Position = targetPos})
	slideIn:Play()
	
	-- Animate bar
	task.spawn(function()
		task.wait(0.3)
		local barTween = TweenService:Create(bar, TweenInfo.new(duration, Enum.EasingStyle.Linear), {Size = UDim2.new(0, 0, 0, 6)})
		barTween:Play()
		
		task.wait(duration)
		
		local slideOut = TweenService:Create(notif, TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.In), {Position = pos.start})
		slideOut:Play()
		
		task.wait(0.4)
		
		for i, v in ipairs(activeNotifications[position]) do
			if v == notif then
				table.remove(activeNotifications[position], i)
				break
			end
		end
		
		notif:Destroy()
		
		local currentOffset = 0
		for _, remainingNotif in ipairs(activeNotifications[position]) do
			if remainingNotif and remainingNotif.Parent then
				local newPos = UDim2.new(
					pos.target.X.Scale,
					pos.target.X.Offset,
					pos.target.Y.Scale,
					pos.target.Y.Offset + currentOffset
				)
				TweenService:Create(remainingNotif, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position = newPos}):Play()
				currentOffset = currentOffset + (110 * pos.direction)
			end
		end
	end)
end

function Library:CreateTab(name)
	local Tab = {}
	Tab.Name = name
	Tab.Cards = {}
	
	local tabButton = createInstance("TextButton", {
		Name = "TabButton",
		Size = UDim2.new(0, 160, 0, 45),
		Parent = TabHolder,
		Font = Enum.Font.GothamMedium,
		Text = name,
		TextSize = 16,
		TextXAlignment = Enum.TextXAlignment.Center,
		TextColor3 = Color3.fromRGB(255, 255, 255),
		BackgroundColor3 = Color3.fromRGB(25, 25, 28),
		BorderSizePixel = 0,
		ZIndex = 1
	})
	
	createInstance("UICorner", {
		Parent = tabButton,
		CornerRadius = UDim.new(0, 3)
	})
	
	Tab.Container = Scroll
	Tab.Button = tabButton
	
	tabButton.MouseButton1Click:Connect(function()
		for _, otherTab in pairs(Library.Tabs) do
			-- Hide all card wrappers from other tabs
			for _, card in pairs(otherTab.Cards) do
				if card.Wrapper then
					card.Wrapper.Visible = false
				end
			end
			otherTab.Button.BackgroundColor3 = Color3.fromRGB(25, 25, 28)
		end
		
		-- Show card wrappers from this tab
		for _, card in pairs(Tab.Cards) do
			if card.Wrapper then
				card.Wrapper.Visible = true
			end
		end
		
		tabButton.BackgroundColor3 = Color3.fromRGB(69, 94, 255)
		Library.CurrentTab = Tab
	end)
	
	tabButton.MouseEnter:Connect(function()
		if Library.CurrentTab ~= Tab then
			createTween(tabButton, {BackgroundColor3 = Color3.fromRGB(35, 35, 38)}, 0.2):Play()
		end
	end)
	
	tabButton.MouseLeave:Connect(function()
		if Library.CurrentTab ~= Tab then
			createTween(tabButton, {BackgroundColor3 = Color3.fromRGB(25, 25, 28)}, 0.2):Play()
		end
	end)
	
	if #Library.Tabs == 0 then
		tabButton.BackgroundColor3 = Color3.fromRGB(69, 94, 255)
		Library.CurrentTab = Tab
	end
	
	table.insert(Library.Tabs, Tab)
	
	function Tab:CreateCard(name, side)
		local Card = {}
		Card.Name = name
		Card.Elements = {}
		Card.LayoutOrder = #Tab.Cards + 1
		Card.Side = side or "Left"
		
		local cardWrapper = createInstance("Frame", {
			Name = "CardWrapper_" .. Card.LayoutOrder,
			Size = UDim2.new(1, -30, 0, 329),
			Parent = Scroll,
			BackgroundTransparency = 1,
			BorderSizePixel = 0,
			LayoutOrder = Card.LayoutOrder,
			Visible = Library.CurrentTab == Tab,
			ZIndex = 1
		})
		
		local cardFrame = createInstance("Frame", {
			Name = name,
			Size = UDim2.new(0, 347, 0, 314),
			AnchorPoint = Card.Side == "Right" and Vector2.new(1, 0) or Vector2.new(0, 0),
			Position = Card.Side == "Right" and UDim2.new(1, 0, 0, 0) or UDim2.new(0, 0, 0, 0),
			Parent = cardWrapper,
			BackgroundColor3 = Color3.fromRGB(21, 21, 23),
			BorderSizePixel = 0,
			ZIndex = 1
		})
		
		createInstance("UICorner", {
			Parent = cardFrame,
			CornerRadius = UDim.new(0, 4)
		})
		
		local header = createInstance("ImageLabel", {
			Name = "Header",
			Size = UDim2.new(0, 347, 0, 48),
			Parent = cardFrame,
			BackgroundTransparency = 1,
			Image = "rbxassetid://114111795744048",
			BorderSizePixel = 0,
			ZIndex = 1
		})
		
		createInstance("TextLabel", {
			Name = "Title",
			Position = UDim2.new(0.055, 0, 0.150, 0),
			Size = UDim2.new(0, 320, 0, 32),
			Parent = header,
			BackgroundTransparency = 1,
			Font = Enum.Font.GothamMedium,
			Text = name,
			TextSize = 15,
			TextXAlignment = Enum.TextXAlignment.Left,
			TextYAlignment = Enum.TextYAlignment.Center,
			TextColor3 = Color3.fromRGB(255, 255, 255),
			BorderSizePixel = 0,
			ZIndex = 1
		})
		
		local mainHolder = createInstance("ScrollingFrame", {
			Name = "MainHolder",
			Position = UDim2.new(0, 0, 0, 48),
			Size = UDim2.new(0, 343, 0, 262),
			Parent = cardFrame,
			BackgroundTransparency = 1,
			ScrollBarThickness = 5,
			ScrollBarImageColor3 = Color3.fromRGB(69, 94, 255),
			CanvasSize = UDim2.new(0, 0, 0, 0),
			BorderSizePixel = 0,
			ZIndex = 1
		})
		
		local holderLayout = createInstance("UIListLayout", {
			Parent = mainHolder,
			Padding = UDim.new(0, 8),
			FillDirection = Enum.FillDirection.Vertical,
			HorizontalAlignment = Enum.HorizontalAlignment.Left,
			VerticalAlignment = Enum.VerticalAlignment.Top,
			SortOrder = Enum.SortOrder.LayoutOrder
		})
		
		createInstance("UIPadding", {
			Parent = mainHolder,
			PaddingTop = UDim.new(0, 10),
			PaddingLeft = UDim.new(0, 10)
		})
		
		holderLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
			local contentHeight = holderLayout.AbsoluteContentSize.Y + 20
			mainHolder.CanvasSize = UDim2.new(0, 0, 0, contentHeight)
		end)
		
		Card.Frame = cardFrame
		Card.Holder = mainHolder
		Card.Wrapper = cardWrapper
		
		function Card:AddToggle(options)
			local name = options.Name or "Toggle"
			local default = options.Default or false
			local callback = options.Callback or function() end
			
			local frame = createInstance("Frame", {
				Name = "Toggle",
				Size = UDim2.new(0, 320, 0, 36),
				Parent = mainHolder,
				BackgroundTransparency = 1,
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			local toggle = createInstance("TextButton", {
				Position = UDim2.new(0, 5, 0.5, 0),
				AnchorPoint = Vector2.new(0, 0.5),
				Size = UDim2.new(0, 25, 0, 25),
				Parent = frame,
				Text = '',
				BackgroundColor3 = default and Color3.fromRGB(69, 94, 255) or Color3.fromRGB(25, 25, 28),
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			createInstance("UICorner", {
				Parent = toggle,
				CornerRadius = UDim.new(0, 5)
			})
			
			createInstance("TextLabel", {
				Position = UDim2.new(0, 40, 0.5, 0),
				AnchorPoint = Vector2.new(0, 0.5),
				Size = UDim2.new(0, 270, 0, 36),
				Parent = frame,
				BackgroundTransparency = 1,
				Font = Enum.Font.GothamMedium,
				Text = name,
				TextSize = 14,
				TextXAlignment = Enum.TextXAlignment.Left,
				TextColor3 = Color3.fromRGB(255, 255, 255),
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			local isToggled = default
			toggle.MouseButton1Click:Connect(function()
				isToggled = not isToggled
				local newColor = isToggled and Color3.fromRGB(69, 94, 255) or Color3.fromRGB(25, 25, 28)
				createTween(toggle, {BackgroundColor3 = newColor}, 0.2):Play()
				callback(isToggled)
			end)
			
			return {
				Set = function(value)
					isToggled = value
					local newColor = isToggled and Color3.fromRGB(69, 94, 255) or Color3.fromRGB(25, 25, 28)
					toggle.BackgroundColor3 = newColor
					callback(isToggled)
				end
			}
		end
		
		function Card:AddSlider(options)
			local name = options.Name or "Slider"
			local min = options.Min or 0
			local max = options.Max or 100
			local default = options.Default or 50
			local callback = options.Callback or function() end
			
			local frame = createInstance("Frame", {
				Name = "Slider",
				Size = UDim2.new(0, 320, 0, 55),
				Parent = mainHolder,
				BackgroundTransparency = 1,
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			local title = createInstance("TextLabel", {
				Position = UDim2.new(0, 5, 0, 0),
				Size = UDim2.new(0, 200, 0, 20),
				Parent = frame,
				BackgroundTransparency = 1,
				Font = Enum.Font.GothamMedium,
				Text = name,
				TextSize = 14,
				TextXAlignment = Enum.TextXAlignment.Left,
				TextColor3 = Color3.fromRGB(255, 255, 255),
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			local valueBox = createInstance("TextBox", {
				Position = UDim2.new(1, -75, 0, 0),
				Size = UDim2.new(0, 70, 0, 20),
				Parent = frame,
				BackgroundColor3 = Color3.fromRGB(25, 25, 28),
				Font = Enum.Font.Gotham,
				Text = tostring(default),
				TextSize = 13,
				TextXAlignment = Enum.TextXAlignment.Center,
				TextColor3 = Color3.fromRGB(255, 255, 255),
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			createInstance("UICorner", {
				Parent = valueBox,
				CornerRadius = UDim.new(0, 4)
			})
			
			local holderBar = createInstance("Frame", {
				Position = UDim2.new(0, 5, 0, 30),
				Size = UDim2.new(1, -10, 0, 12),
				Parent = frame,
				BackgroundColor3 = Color3.fromRGB(25, 25, 28),
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			createInstance("UICorner", {
				Parent = holderBar,
				CornerRadius = UDim.new(0, 5)
			})
			
			local fillBar = createInstance("Frame", {
				Position = UDim2.new(0, 0, 0, 0),
				Size = UDim2.new((default - min) / (max - min), 0, 1, 0),
				Parent = holderBar,
				BackgroundColor3 = Color3.fromRGB(69, 94, 255),
				BorderSizePixel = 0,
				ZIndex = 3
			})
			
			createInstance("UICorner", {
				Parent = fillBar,
				CornerRadius = UDim.new(0, 5)
			})
			
			local dragger = createInstance("TextButton", {
				Position = UDim2.new((default - min) / (max - min), 0, 0.5, 0),
				Size = UDim2.new(0, 10, 0, 22),
				AnchorPoint = Vector2.new(0.5, 0.5),
				Parent = holderBar,
				Text = '',
				BackgroundColor3 = Color3.fromRGB(255, 255, 255),
				BorderSizePixel = 0,
				ZIndex = 4
			})
			
			createInstance("UICorner", {
				Parent = dragger,
				CornerRadius = UDim.new(0, 5)
			})
			
			local currentValue = default
			local dragging = false
			
			dragger.MouseButton1Down:Connect(function()
				dragging = true
			end)
			
			UserInputService.InputEnded:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 then
					dragging = false
				end
			end)
			
			UserInputService.InputChanged:Connect(function(input)
				if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
					local mousePos = UserInputService:GetMouseLocation()
					local relativePos = math.clamp((mousePos.X - holderBar.AbsolutePosition.X) / holderBar.AbsoluteSize.X, 0, 1)
					
					currentValue = math.floor(min + (max - min) * relativePos)
					valueBox.Text = tostring(currentValue)
					
					dragger.Position = UDim2.new(relativePos, 0, 0.5, 0)
					fillBar.Size = UDim2.new(relativePos, 0, 1, 0)
					
					callback(currentValue)
				end
			end)
			
			valueBox.FocusLost:Connect(function()
				local newVal = tonumber(valueBox.Text)
				if newVal then
					newVal = math.clamp(newVal, min, max)
					currentValue = newVal
					valueBox.Text = tostring(newVal)
					local relativePos = (newVal - min) / (max - min)
					dragger.Position = UDim2.new(relativePos, 0, 0.5, 0)
					fillBar.Size = UDim2.new(relativePos, 0, 1, 0)
					callback(newVal)
				else
					valueBox.Text = tostring(currentValue)
				end
			end)
			
			return {
				Set = function(value)
					value = math.clamp(value, min, max)
					currentValue = value
					valueBox.Text = tostring(value)
					local relativePos = (value - min) / (max - min)
					dragger.Position = UDim2.new(relativePos, 0, 0.5, 0)
					fillBar.Size = UDim2.new(relativePos, 0, 1, 0)
					callback(value)
				end
			}
		end
		
		function Card:AddDropdown(options)
			local name = options.Name or "Dropdown"
			local list = options.List or {}
			local default = options.Default or list[1] or ""
			local callback = options.Callback or function() end
			
			local frame = createInstance("Frame", {
				Name = "Dropdown",
				Size = UDim2.new(0, 320, 0, 36),
				Parent = mainHolder,
				BackgroundColor3 = Color3.fromRGB(25, 25, 28),
				BorderSizePixel = 0,
				ZIndex = 50
			})
			
			createInstance("UICorner", {
				Parent = frame,
				CornerRadius = UDim.new(0, 4)
			})
			
			local button = createInstance("TextButton", {
				Position = UDim2.new(0, 10, 0.5, 0),
				AnchorPoint = Vector2.new(0, 0.5),
				Size = UDim2.new(1, -20, 0, 26),
				Parent = frame,
				BackgroundTransparency = 1,
				Font = Enum.Font.GothamMedium,
				Text = default,
				TextSize = 14,
				TextXAlignment = Enum.TextXAlignment.Left,
				TextColor3 = Color3.fromRGB(255, 255, 255),
				BorderSizePixel = 0,
				ZIndex = 51
			})
			
			local arrow = createInstance("ImageLabel", {
				Position = UDim2.new(1, -25, 0.5, 0),
				AnchorPoint = Vector2.new(0, 0.5),
				Size = UDim2.new(0, 16, 0, 16),
				Parent = button,
				BackgroundTransparency = 1,
				Image = "rbxassetid://134116754541554",
				Rotation = 180,
				ZIndex = 51
			})
			
			-- Create dropdown content outside the card, attached to Neptune
			local dropContent = createInstance("Frame", {
				Position = UDim2.new(0, 0, 0, 0),
				Size = UDim2.new(0, 320, 0, 0),
				Parent = Neptune,
				BackgroundColor3 = Color3.fromRGB(25, 25, 28),
				ClipsDescendants = true,
				BorderSizePixel = 0,
				Visible = false,
				ZIndex = 200
			})
			
			createInstance("UICorner", {
				Parent = dropContent,
				CornerRadius = UDim.new(0, 4)
			})
			
			createInstance("UIStroke", {
				Parent = dropContent,
				Color = Color3.fromRGB(45, 45, 48),
				Thickness = 1
			})
			
			local listLayout = createInstance("UIListLayout", {
				Parent = dropContent,
				Padding = UDim.new(0, 4),
				FillDirection = Enum.FillDirection.Vertical,
				HorizontalAlignment = Enum.HorizontalAlignment.Center,
				VerticalAlignment = Enum.VerticalAlignment.Top,
				SortOrder = Enum.SortOrder.LayoutOrder
			})
			
			createInstance("UIPadding", {
				Parent = dropContent,
				PaddingTop = UDim.new(0, 8),
				PaddingBottom = UDim.new(0, 8),
				PaddingLeft = UDim.new(0, 8),
				PaddingRight = UDim.new(0, 8)
			})
			
			for _, option in ipairs(list) do
				local optionBtn = createInstance("TextButton", {
					Size = UDim2.new(1, -16, 0, 28),
					Parent = dropContent,
					BackgroundTransparency = 1,
					Font = Enum.Font.Gotham,
					Text = option,
					TextSize = 13,
					TextXAlignment = Enum.TextXAlignment.Center,
					TextColor3 = Color3.fromRGB(255, 255, 255),
					BorderSizePixel = 0,
					ZIndex = 201
				})
				
				createInstance("UICorner", {
					Parent = optionBtn,
					CornerRadius = UDim.new(0, 4)
				})
				
				optionBtn.MouseEnter:Connect(function()
					createTween(optionBtn, {BackgroundTransparency = 0, BackgroundColor3 = Color3.fromRGB(69, 94, 255)}, 0.2):Play()
				end)
				
				optionBtn.MouseLeave:Connect(function()
					createTween(optionBtn, {BackgroundTransparency = 1}, 0.2):Play()
				end)
				
				optionBtn.MouseButton1Click:Connect(function()
					button.Text = option
					dropContent.Visible = false
					createTween(dropContent, {Size = UDim2.new(0, 320, 0, 0)}, 0.3):Play()
					createTween(arrow, {Rotation = 180}, 0.3):Play()
					callback(option)
				end)
			end
			
			local isOpen = false
			
			local function updateDropdownPosition()
				local buttonPos = frame.AbsolutePosition
				local buttonSize = frame.AbsoluteSize
				local holderPos = Holder.AbsolutePosition
				local scale = Holder:FindFirstChildOfClass("UIScale") and Holder:FindFirstChildOfClass("UIScale").Scale or 1
				
				local relativeX = buttonPos.X - holderPos.X
				local relativeY = (buttonPos.Y - holderPos.Y) + buttonSize.Y + 5
				
				dropContent.Position = UDim2.new(0, relativeX / scale, 0, relativeY / scale)
			end
			
			mainHolder:GetPropertyChangedSignal("CanvasPosition"):Connect(function()
				if isOpen then
					updateDropdownPosition()
				end
			end)
			
			local updateConnection
			
			button.MouseButton1Click:Connect(function()
				isOpen = not isOpen
				if isOpen then
					updateDropdownPosition()
					dropContent.Visible = true
					local contentHeight = (#list * 32) + 16
					createTween(dropContent, {Size = UDim2.new(0, 320, 0, contentHeight)}, 0.3):Play()
					createTween(arrow, {Rotation = 0}, 0.3):Play()
					
					if updateConnection then
						updateConnection:Disconnect()
					end
					updateConnection = game:GetService("RunService").RenderStepped:Connect(function()
						if isOpen then
							updateDropdownPosition()
						end
					end)
				else
					if updateConnection then
						updateConnection:Disconnect()
					end
					createTween(dropContent, {Size = UDim2.new(0, 320, 0, 0)}, 0.3):Play()
					createTween(arrow, {Rotation = 180}, 0.3):Play()
					task.wait(0.3)
					dropContent.Visible = false
				end
			end)
			
			UserInputService.InputBegan:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 then
					if isOpen then
						local mousePos = UserInputService:GetMouseLocation()
						local dropPos = dropContent.AbsolutePosition
						local dropSize = dropContent.AbsoluteSize
						local buttonPos = frame.AbsolutePosition
						local buttonSize = frame.AbsoluteSize
						
						local inDropdown = mousePos.X >= dropPos.X and mousePos.X <= dropPos.X + dropSize.X and
						                   mousePos.Y >= dropPos.Y and mousePos.Y <= dropPos.Y + dropSize.Y
						
						local inButton = mousePos.X >= buttonPos.X and mousePos.X <= buttonPos.X + buttonSize.X and
						                 mousePos.Y >= buttonPos.Y and mousePos.Y <= buttonPos.Y + buttonSize.Y
						
						if not inDropdown and not inButton then
							isOpen = false
							if updateConnection then
								updateConnection:Disconnect()
							end
							createTween(dropContent, {Size = UDim2.new(0, 320, 0, 0)}, 0.3):Play()
							createTween(arrow, {Rotation = 180}, 0.3):Play()
							task.wait(0.3)
							dropContent.Visible = false
						end
					end
				end
			end)
			
			return {
				Set = function(value)
					button.Text = value
					callback(value)
				end,
				Refresh = function(newList)
					for _, child in pairs(dropContent:GetChildren()) do
						if child:IsA("TextButton") then
							child:Destroy()
						end
					end
					
					list = newList
					
					for _, option in ipairs(newList) do
						local optionBtn = createInstance("TextButton", {
							Size = UDim2.new(1, -16, 0, 28),
							Parent = dropContent,
							BackgroundTransparency = 1,
							Font = Enum.Font.Gotham,
							Text = option,
							TextSize = 13,
							TextXAlignment = Enum.TextXAlignment.Center,
							TextColor3 = Color3.fromRGB(255, 255, 255),
							BorderSizePixel = 0,
							ZIndex = 201
						})
						
						createInstance("UICorner", {
							Parent = optionBtn,
							CornerRadius = UDim.new(0, 4)
						})
						
						optionBtn.MouseEnter:Connect(function()
							createTween(optionBtn, {BackgroundTransparency = 0, BackgroundColor3 = Color3.fromRGB(69, 94, 255)}, 0.2):Play()
						end)
						
						optionBtn.MouseLeave:Connect(function()
							createTween(optionBtn, {BackgroundTransparency = 1}, 0.2):Play()
						end)
						
						optionBtn.MouseButton1Click:Connect(function()
							button.Text = option
							dropContent.Visible = false
							createTween(dropContent, {Size = UDim2.new(0, 320, 0, 0)}, 0.3):Play()
							createTween(arrow, {Rotation = 180}, 0.3):Play()
							callback(option)
						end)
					end
				end
			}
		end
		
		function Card:AddColorPicker(options)
			local name = options.Name or "Color Picker"
			local default = options.Default or Color3.fromRGB(255, 0, 0)
			local callback = options.Callback or function() end
			
			local frame = createInstance("Frame", {
				Name = "ColorPicker",
				Size = UDim2.new(0, 320, 0, 36),
				Parent = mainHolder,
				BackgroundTransparency = 1,
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			local colorButton = createInstance("TextButton", {
				Position = UDim2.new(0, 5, 0.5, 0),
				AnchorPoint = Vector2.new(0, 0.5),
				Size = UDim2.new(0, 25, 0, 25),
				Parent = frame,
				Text = '',
				BackgroundColor3 = default,
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			createInstance("UICorner", {
				Parent = colorButton,
				CornerRadius = UDim.new(0, 5)
			})
			
			createInstance("TextLabel", {
				Position = UDim2.new(0, 40, 0.5, 0),
				AnchorPoint = Vector2.new(0, 0.5),
				Size = UDim2.new(0, 270, 0, 36),
				Parent = frame,
				BackgroundTransparency = 1,
				Font = Enum.Font.GothamMedium,
				Text = name,
				TextSize = 14,
				TextXAlignment = Enum.TextXAlignment.Left,
				TextColor3 = Color3.fromRGB(255, 255, 255),
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			colorButton.MouseButton1Click:Connect(function()
				ColorPickerFrame.Visible = not ColorPickerFrame.Visible
				
				currentCallback = function(color)
					colorButton.BackgroundColor3 = color
					callback(color)
				end
				
				-- Set initial color
				local h, s, v = default:ToHSV()
				currentHue = h * 360
				currentSat = s
				currentVal = v
				currentDarkness = 0
				
				HueDragger.Position = UDim2.new(h, 0, 0.5, 0)
				ColorSelector.Position = UDim2.new(s, 0, 1 - v, 0)
				DarknessDragger.Position = UDim2.new(0, 0, 0.5, 0)
				
				local hueColor = Color3.fromHSV(h, 1, 1)
				Colorview.BackgroundColor3 = hueColor
			end)
			
			return {
				Set = function(color)
					colorButton.BackgroundColor3 = color
					callback(color)
				end
			}
		end
		
		function Card:AddButton(options)
			local name = options.Name or "Button"
			local callback = options.Callback or function() end
			
			local button = createInstance("TextButton", {
				Size = UDim2.new(0, 320, 0, 36),
				Parent = mainHolder,
				BackgroundColor3 = Color3.fromRGB(69, 94, 255),
				Font = Enum.Font.GothamMedium,
				Text = name,
				TextSize = 14,
				TextColor3 = Color3.fromRGB(255, 255, 255),
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			createInstance("UICorner", {
				Parent = button,
				CornerRadius = UDim.new(0, 5)
			})
			
			button.MouseEnter:Connect(function()
				createTween(button, {BackgroundColor3 = Color3.fromRGB(89, 114, 255)}, 0.2):Play()
			end)
			
			button.MouseLeave:Connect(function()
				createTween(button, {BackgroundColor3 = Color3.fromRGB(69, 94, 255)}, 0.2):Play()
			end)
			
			button.MouseButton1Click:Connect(function()
				createTween(button, {Size = UDim2.new(0, 315, 0, 34)}, 0.1):Play()
				task.wait(0.1)
				createTween(button, {Size = UDim2.new(0, 320, 0, 36)}, 0.1):Play()
				callback()
			end)
		end
		
		function Card:AddKeybind(options)
			local name = options.Name or "Keybind"
			local default = options.Default or Enum.KeyCode.E
			local callback = options.Callback or function() end
			
			local frame = createInstance("Frame", {
				Name = "Keybind",
				Size = UDim2.new(0, 320, 0, 36),
				Parent = mainHolder,
				BackgroundTransparency = 1,
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			createInstance("TextLabel", {
				Position = UDim2.new(0, 5, 0.5, 0),
				AnchorPoint = Vector2.new(0, 0.5),
				Size = UDim2.new(0, 200, 0, 36),
				Parent = frame,
				BackgroundTransparency = 1,
				Font = Enum.Font.GothamMedium,
				Text = name,
				TextSize = 14,
				TextXAlignment = Enum.TextXAlignment.Left,
				TextColor3 = Color3.fromRGB(255, 255, 255),
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			local keybindButton = createInstance("TextButton", {
				Position = UDim2.new(1, -75, 0.5, 0),
				AnchorPoint = Vector2.new(0, 0.5),
				Size = UDim2.new(0, 70, 0, 26),
				Parent = frame,
				BackgroundColor3 = Color3.fromRGB(25, 25, 28),
				Font = Enum.Font.Gotham,
				Text = default.Name,
				TextSize = 12,
				TextColor3 = Color3.fromRGB(255, 255, 255),
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			createInstance("UICorner", {
				Parent = keybindButton,
				CornerRadius = UDim.new(0, 5)
			})
			
			createInstance("UIStroke", {
				Parent = keybindButton,
				Color = Color3.fromRGB(69, 94, 255),
				Thickness = 1,
				Transparency = 0.5
			})
			
			local currentKey = default
			local listening = false
			
			keybindButton.MouseButton1Click:Connect(function()
				listening = true
				keybindButton.Text = "..."
				keybindButton.BackgroundColor3 = Color3.fromRGB(69, 94, 255)
			end)
			
			UserInputService.InputBegan:Connect(function(input, gameProcessed)
				if listening then
					if input.UserInputType == Enum.UserInputType.Keyboard then
						currentKey = input.KeyCode
						keybindButton.Text = currentKey.Name
						keybindButton.BackgroundColor3 = Color3.fromRGB(25, 25, 28)
						listening = false
						callback(currentKey)
					end
				elseif not gameProcessed and input.KeyCode == currentKey then
					callback(currentKey)
				end
			end)
			
			return {
				Set = function(keyCode)
					currentKey = keyCode
					keybindButton.Text = keyCode.Name
					callback(keyCode)
				end,
				Get = function()
					return currentKey
				end
			}
		end
		
		function Card:AddTextBox(options)
			local name = options.Name or "TextBox"
			local placeholder = options.Placeholder or "Enter text..."
			local default = options.Default or ""
			local callback = options.Callback or function() end
			
			local frame = createInstance("Frame", {
				Name = "TextBox",
				Size = UDim2.new(0, 320, 0, 55),
				Parent = mainHolder,
				BackgroundTransparency = 1,
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			createInstance("TextLabel", {
				Position = UDim2.new(0, 5, 0, 0),
				Size = UDim2.new(0, 200, 0, 20),
				Parent = frame,
				BackgroundTransparency = 1,
				Font = Enum.Font.GothamMedium,
				Text = name,
				TextSize = 14,
				TextXAlignment = Enum.TextXAlignment.Left,
				TextColor3 = Color3.fromRGB(255, 255, 255),
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			local textBox = createInstance("TextBox", {
				Position = UDim2.new(0, 5, 0, 25),
				Size = UDim2.new(1, -10, 0, 26),
				Parent = frame,
				BackgroundColor3 = Color3.fromRGB(25, 25, 28),
				Font = Enum.Font.Gotham,
				PlaceholderText = placeholder,
				Text = default,
				TextSize = 13,
				TextXAlignment = Enum.TextXAlignment.Left,
				TextColor3 = Color3.fromRGB(255, 255, 255),
				PlaceholderColor3 = Color3.fromRGB(120, 120, 120),
				ClearTextOnFocus = false,
				BorderSizePixel = 0,
				ZIndex = 1
			})
			
			createInstance("UICorner", {
				Parent = textBox,
				CornerRadius = UDim.new(0, 5)
			})
			
			createInstance("UIStroke", {
				Parent = textBox,
				Color = Color3.fromRGB(45, 45, 48),
				Thickness = 1,
				Transparency = 0.5
			})
			
			createInstance("UIPadding", {
				Parent = textBox,
				PaddingLeft = UDim.new(0, 10),
				PaddingRight = UDim.new(0, 10)
			})
			
			textBox.FocusLost:Connect(function(enterPressed)
				callback(textBox.Text)
			end)
			
			return {
				Set = function(text)
					textBox.Text = text
					callback(text)
				end,
				Get = function()
					return textBox.Text
				end
			}
		end
		
		table.insert(Tab.Cards, Card)
		return Card
	end
	
	return Tab
end

return Library
